@model RoomDto

@{
    var statusClass = Model.Status == "Available" ? "available" :
                     Model.Status == "Occupied" ? "occupied" :
                     Model.Status == "Reserved" ? "reserved" : "maintenance";
    var statusFilter = Model.Status.ToLower();
    var iconBgClass = Model.Status == "Available" ? "bg-green-100" :
                     Model.Status == "Occupied" ? "bg-red-100" :
                     Model.Status == "Reserved" ? "bg-yellow-100" : "bg-gray-100";
    var iconColorClass = Model.Status == "Available" ? "text-green-600" :
                        Model.Status == "Occupied" ? "text-red-600" :
                        Model.Status == "Reserved" ? "text-yellow-600" : "text-gray-600";
    var statusBadgeClass = Model.Status == "Available" ? "status-available" :
                          Model.Status == "Occupied" ? "status-occupied" :
                          Model.Status == "Reserved" ? "status-reserved" : "status-maintenance";
}

<div class="room-card @statusClass fade-in"
     data-room-name="@Model.Name.ToLower()"
     data-room-status="@statusFilter"
     data-room-id="@Model.Id">

    <!-- Room Header -->
    <div class="flex justify-between items-start mb-4">
        <div class="flex items-center space-x-3">
            <div class="@iconBgClass p-3 rounded-xl">
                <i class="fas fa-door-open @iconColorClass text-2xl"></i>
            </div>
            <div>
                <h3 class="font-bold text-lg text-gray-900">@Model.Name</h3>
                <div class="flex items-center gap-2 mt-1">
                    @if (Model.HasAC)
                    {
                        <span class="text-xs text-blue-600 flex items-center">
                            <i class="fas fa-wind mr-1"></i>
                            AC
                        </span>
                    }
                    <span class="text-xs text-gray-500">
                        <i class="fas fa-gamepad mr-1"></i>
                        @Model.DeviceCount Device@(Model.DeviceCount != 1 ? "s" : "")
                    </span>
                </div>
            </div>
        </div>

        <!-- Status Badge -->
        <span class="status-badge @statusBadgeClass">
            @Model.Status
        </span>
    </div>

    <!-- Room Details -->
    <div class="border-t border-gray-100 pt-4 mb-4 space-y-3">
        <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600">Hourly Rate</span>
            <span class="text-lg font-bold text-blue-600">@Model.HourlyRate.ToString("C")</span>
        </div>

        <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600">
                <i class="fas fa-users mr-1"></i>
                Capacity
            </span>
            <span class="text-sm font-bold text-gray-900">@Model.Capacity people</span>
        </div>

        @if (Model.Status == "Occupied")
        {
            <div class="bg-red-50 p-3 rounded-lg border-l-4 border-red-500">
                <div class="flex justify-between items-center">
                    <span class="text-xs text-gray-600">Current Occupancy</span>
                    <span class="text-sm font-bold text-red-600">
                        @Model.CurrentOccupancy / @Model.Capacity
                    </span>
                </div>
                <div class="mt-2 bg-gray-200 rounded-full h-2">
                    <div class="bg-red-600 h-2 rounded-full transition-all"
                         style="width: @((Model.CurrentOccupancy * 100.0 / Model.Capacity).ToString("F0"))%"></div>
                </div>
            </div>
        }
    </div>

    <!-- Actions -->
    <div class="flex space-x-2">
        @if (Model.Status == "Available")
        {
            <button class="btn btn-success flex-1">
                <i class="fas fa-door-open mr-2"></i>
                Book Now
            </button>
        }
        else if (Model.Status == "Occupied")
        {
            <button class="btn btn-secondary flex-1 opacity-50 cursor-not-allowed" disabled>
                <i class="fas fa-users mr-2"></i>
                Occupied
            </button>
        }
        else if (Model.Status == "Reserved")
        {
            <button class="btn btn-secondary flex-1 opacity-50 cursor-not-allowed" disabled>
                <i class="fas fa-calendar-check mr-2"></i>
                Reserved
            </button>
        }
        else
        {
            <button class="btn btn-secondary flex-1 opacity-50 cursor-not-allowed" disabled>
                <i class="fas fa-tools mr-2"></i>
                Maintenance
            </button>
        }

        <button onclick="editRoom(@Model.Id)"
                class="btn btn-outline">
            <i class="fas fa-edit"></i>
        </button>
        <button onclick="deleteRoom(@Model.Id, '@Model.Name')"
                class="btn btn-danger">
            <i class="fas fa-trash"></i>
        </button>
    </div>
</div>
@model DeviceDto
@using StationPro.Domain.Entities
@using Microsoft.Extensions.Localization
@using StationPro
@inject IStringLocalizer<SharedResources> Localizer

@{
    var statusClass = Model.Status == "Available" ? "available" :
                     Model.Status == "In Use" ? "in-use" :
                     Model.Status == "Maintenance" ? "maintenance" : "offline";
    var statusFilter = Model.Status == "Available" ? "available" :
                      Model.Status == "In Use" ? "in-use" :
                      Model.Status == "Maintenance" ? "maintenance" : "offline";
    var iconBgClass = Model.Status == "Available" ? "bg-green-100" :
                     Model.Status == "In Use" ? "bg-red-100" :
                     Model.Status == "Maintenance" ? "bg-yellow-100" : "bg-gray-100";
    var iconColorClass = Model.Status == "Available" ? "text-green-600" :
                        Model.Status == "In Use" ? "text-red-600" :
                        Model.Status == "Maintenance" ? "text-yellow-600" : "text-gray-600";
    var statusBadgeClass = Model.Status == "Available" ? "status-available" :
                          Model.Status == "In Use" ? "status-in-use" :
                          Model.Status == "Maintenance" ? "status-maintenance" : "status-offline";
    var deviceIconClass = ((int)Model.Type == 1 || (int)Model.Type == 2 || (int)Model.Type == 3) ? "fab fa-playstation" :
                         (int)Model.Type == 4 ? "fab fa-xbox" :
                         (int)Model.Type == 5 ? "fas fa-desktop" :
                         (int)Model.Type == 6 ? "fas fa-table-tennis" :
                         ((int)Model.Type == 7 || (int)Model.Type == 8) ? "fas fa-circle" : "fas fa-gamepad";

    var multiSessionFilter = Model.SupportsMultiSession ? "multi-session" : "";
}

<div class="device-card @statusClass fade-in"
     data-device-name="@Model.Name.ToLower()"
     data-device-status="@statusFilter"
     data-device-id="@Model.Id"
     data-multi-session="@multiSessionFilter">

    <!-- Device Header -->
    <div class="flex justify-between items-start mb-4">
        <div class="flex items-center space-x-3">
            <div class="@iconBgClass p-3 rounded-xl">
                <i class="@deviceIconClass @iconColorClass text-2xl"></i>
            </div>
            <div>
                <h3 class="font-bold text-lg text-gray-900">@Model.Name</h3>
                <p class="text-sm text-gray-500">@Model.TypeName</p>
            </div>
        </div>

        <!-- Status Badge -->
        <span class="status-badge @statusBadgeClass">
            @Localizer[Model.Status]
        </span>
    </div>

    <!-- Device Details -->
    <div class="border-t border-gray-100 pt-4 mb-4 space-y-3">
        <!-- Rates Display -->
        <div class="space-y-2">
            <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 flex items-center">
                    <i class="fas fa-user text-blue-600 mr-2"></i>
                    @Localizer["Single"]
                </span>
                <span class="text-lg font-bold text-blue-600">@Model.SingleSessionRate.ToString("C")</span>
            </div>

            @if (Model.SupportsMultiSession && Model.MultiSessionRate.HasValue)
            {
                <div class="flex justify-between items-center p-2 bg-purple-50 rounded-lg border border-purple-200">
                    <span class="text-sm text-gray-600 flex items-center">
                        <i class="fas fa-users text-purple-600 mr-2"></i>
                        @Localizer["Multi"]
                    </span>
                    <span class="text-lg font-bold text-purple-600">@Model.MultiSessionRate.Value.ToString("C")</span>
                </div>
            }
        </div>
    </div>

    <!-- Actions - ONLY Edit and Delete -->
    <div class="flex space-x-2 mt-auto">
        <button onclick="editDevice(@Model.Id)"
                class="btn btn-outline flex-1">
            <i class="fas fa-edit mr-2"></i>
            @Localizer["Edit"]
        </button>
        <button onclick="deleteDevice(@Model.Id, '@Model.Name')"
                class="btn btn-danger flex-1">
            <i class="fas fa-trash mr-2"></i>
            @Localizer["Delete"]
        </button>
    </div>
</div>
